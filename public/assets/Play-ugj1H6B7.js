import{c as W,g as $,r as w,d as I,j as t,s as C,h as D,k as B,m as k,p as T,q as S,t as z,u as P,b as m,S as g,T as f,B as u,A,o as H}from"./index-BV-z0Dyj.js";import{R}from"./Remove-DCf7Lbwu.js";function _(r){return W("MuiDivider",r)}$("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const M=r=>{const{absolute:e,children:i,classes:d,flexItem:p,light:l,orientation:a,textAlign:s,variant:o}=r;return B({root:["root",e&&"absolute",o,l&&"light",a==="vertical"&&"vertical",p&&"flexItem",i&&"withChildren",i&&a==="vertical"&&"withChildrenVertical",s==="right"&&a!=="vertical"&&"textAlignRight",s==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},_,d)},V=C("div",{name:"MuiDivider",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:i}=r;return[e.root,i.absolute&&e.absolute,e[i.variant],i.light&&e.light,i.orientation==="vertical"&&e.vertical,i.flexItem&&e.flexItem,i.children&&e.withChildren,i.children&&i.orientation==="vertical"&&e.withChildrenVertical,i.textAlign==="right"&&i.orientation!=="vertical"&&e.textAlignRight,i.textAlign==="left"&&i.orientation!=="vertical"&&e.textAlignLeft]}})(k(({theme:r})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(r.vars||r).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:r.vars?`rgba(${r.vars.palette.dividerChannel} / 0.08)`:T(r.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:r.spacing(2),marginRight:r.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:r.spacing(1),marginBottom:r.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(r.vars||r).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(r.vars||r).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),G=C("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(r,e)=>{const{ownerState:i}=r;return[e.wrapper,i.orientation==="vertical"&&e.wrapperVertical]}})(k(({theme:r})=>({display:"inline-block",paddingLeft:`calc(${r.spacing(1)} * 1.2)`,paddingRight:`calc(${r.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${r.spacing(1)} * 1.2)`,paddingBottom:`calc(${r.spacing(1)} * 1.2)`}}]}))),j=w.forwardRef(function(e,i){const d=I({props:e,name:"MuiDivider"}),{absolute:p=!1,children:l,className:a,orientation:s="horizontal",component:o=l||s==="vertical"?"div":"hr",flexItem:n=!1,light:h=!1,role:c=o!=="hr"?"separator":void 0,textAlign:x="center",variant:v="fullWidth",...L}=d,b={...d,absolute:p,component:o,flexItem:n,light:h,orientation:s,role:c,textAlign:x,variant:v},y=M(b);return t.jsx(V,{as:o,className:D(y.root,a),role:c,ref:i,ownerState:b,"aria-orientation":c==="separator"&&(o!=="hr"||s==="vertical")?s:void 0,...L,children:l?t.jsx(G,{className:y.wrapper,ownerState:b,children:l}):null})});j&&(j.muiSkipListHighlight=!0);const E=S(t.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),F=S(t.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})),J=()=>{const{id:r}=z(),[e,i]=w.useState(null),d=P();w.useEffect(()=>{m.get(`/api/game/${r}`).then(o=>{i(o)}).catch(o=>console.error("Error fetching game:",o))},[r]);const p=async o=>{if(e.currentHole===e.holes.length&&o===1){d(`/game/results/${e._id}?finish=true`);return}try{const n=await m.put(`/api/game/${e._id}/hole`,{direction:o});i(n)}catch(n){console.error(n)}},l=async(o,n)=>{const h={...e},c=h.players.find(v=>v._id.toString()===o),x=c.scores.find(v=>v.hole===e.currentHole);x?x.strokes+=n:c.scores.push({hole:e.currentHole,strokes:n}),i(h)},a=async(o,n)=>{const h={...e};l(o,n);try{await m.put(`/api/game/${e._id}/${o}/stroke`,{stroke:n})}catch(c){console.error(c),i(h)}};if(!e)return t.jsx("div",{children:"Loading..."});const s=async o=>{const n={...e},h={...e},c=n.holes[e.currentHole-1].par+o;n.holes[e.currentHole-1].par=c,i(n);try{await m.put(`/api/game/${e._id}/hole/${e.currentHole}`,{par:c})}catch(x){console.error(x),i(h)}};return t.jsxs(t.Fragment,{children:[t.jsx(g,{spacing:2,children:e.players.map((o,n)=>t.jsxs(t.Fragment,{children:[t.jsx(N,{game:e,player:o,onChangeStroke:a},o.name),n<e.players.length-1&&t.jsx(j,{})]}))}),t.jsxs(g,{spacing:2,sx:{position:"fixed",bottom:"56px",left:0,right:0,backgroundColor:"background.paper",boxShadow:3,zIndex:10,maxWidth:"700px",margin:"0 auto",padding:"1rem",borderBottom:"1px solid #e0e0e0"},children:[t.jsxs(g,{direction:"row",spacing:2,alignItems:"center",children:[t.jsxs(f,{variant:"h4",children:["Par ",e.holes[e.currentHole-1].par]}),t.jsxs(g,{direction:"row",spacing:2,alignItems:"center",children:[t.jsx(u,{variant:"outlined",color:"secondary",onClick:()=>s(-1),sx:{minWidth:"35px",width:"35px",height:"35px",padding:0},children:t.jsx(R,{fontSize:"small"})}),t.jsx(u,{sx:{minWidth:"35px",width:"35px",height:"35px",padding:0},variant:"outlined",color:"secondary",onClick:()=>s(1),children:t.jsx(A,{fontSize:"small"})})]})]}),t.jsxs(H,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(u,{color:"secondary",style:{borderRadius:50},onClick:()=>p(-1),children:t.jsx(E,{})}),t.jsxs(f,{variant:"h4",textAlign:"center",children:["Hole ",e.currentHole]}),t.jsx(u,{color:"secondary",onClick:()=>p(1),children:e.currentHole===e.holes.length?"Finish":t.jsx(F,{})})]})]})]})},N=({game:r,player:e,onChangeStroke:i})=>{var p;const d=e.scores.reduce((l,a)=>{const s=r.holes.find(o=>o.number===a.hole);return l+((a.strokes||0)-s.par)},0);return t.jsx(H,{children:t.jsxs(g,{direction:"row",justifyContent:"space-between",children:[t.jsxs(g,{direction:"row",spacing:2,alignItems:"center",children:[t.jsxs(f,{variant:"body1",style:{minWidth:"18px"},children:[d>0?"+":"",d]}),t.jsx(f,{variant:"h4",children:e.name})]}),t.jsxs(g,{direction:"row",spacing:2,alignItems:"center",children:[t.jsx(u,{variant:"contained",color:"primary",onClick:()=>i(e._id,-1),sx:{borderRadius:"50%",minWidth:"40px",width:"40px",height:"40px",padding:0},children:t.jsx(R,{})}),t.jsx(f,{variant:"h4",children:((p=e.scores.find(l=>l.hole===r.currentHole))==null?void 0:p.strokes)||0}),t.jsx(u,{sx:{borderRadius:"50%",minWidth:"40px",width:"40px",height:"40px",padding:0},variant:"contained",color:"primary",onClick:()=>i(e._id,1),children:t.jsx(A,{})})]})]})})};export{J as default};
